(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(t,e,a){},33:function(t,e,a){t.exports=a(57)},38:function(t,e,a){},39:function(t,e,a){},50:function(t,e,a){},51:function(t,e,a){},56:function(t,e,a){},57:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),r=a(29),c=a.n(r),i=(a(38),a(15)),o=a(14),l=a(4),u=a(5),d=a(7),m=a(6),p=a(13),v=a(8),f=(a(39),a(22)),h=a(23),g=a.n(h);g.a.initializeApp({apiKey:"AIzaSyDClxcrsmHuwKWC9ukO6m0c5eZA8mU8HLw",authDomain:"snackapp-db910.firebaseapp.com",databaseURL:"https://snackapp-db910.firebaseio.com",projectId:"snackapp-db910",storageBucket:"",messagingSenderId:"467563590360",appId:"1:467563590360:web:a0c063a7d04d97b7"});var b=g.a,E=function(t){function e(t){var a;Object(l.a)(this,e),(a=Object(d.a)(this,Object(m.a)(e).call(this,t))).handleRating=function(t){if(a.state.voted){if(t===a.state.myRating)return;var e=(a.state.rating*a.state.count-a.state.myRating+t)/a.state.count;a.setState({rating:e,myRating:t}),localStorage.setItem("snack_"+a.state.id,t),b.database().ref("items/"+a.state.id+"/rating").set(e)}else{var n=a.state.count+1,s=(a.state.rating*(n-1)+t)/n;a.setState({count:n,rating:s,myRating:t,voted:!0}),localStorage.setItem("snack_"+a.state.id,t),b.database().ref("items/"+a.state.id+"/rating").set(s),b.database().ref("items/"+a.state.id+"/count").set(n)}};var n=localStorage.getItem("snack_"+(t.id-1));return a.state={id:t.id-1,rating:t.rating,myRating:n||0,count:t.count,voted:!!n},a}return Object(v.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props;return s.a.createElement("div",{id:this.state.id,className:"card"},s.a.createElement("div",{className:"card__main"},s.a.createElement("img",{className:"card__picture",alt:t.title,src:t.image}),s.a.createElement("div",{className:"card__fade"}),s.a.createElement("div",{className:"card__info"},s.a.createElement("span",{className:"card__title"},t.title),s.a.createElement(f.a,{className:"rating",initialRating:this.state.rating,readonly:!0,emptySymbol:s.a.createElement("div",{className:"rating__star -empty"}),fullSymbol:s.a.createElement("div",{className:"rating__star -full"})}),s.a.createElement("span",null,"(".concat(this.state.count,")")))),s.a.createElement("div",{className:"card__rating"},s.a.createElement("div",{className:"userRating"},s.a.createElement(f.a,{initialRating:this.state.myRating,onChange:this.handleRating,emptySymbol:s.a.createElement("div",{className:"userRating__star -empty"}),fullSymbol:s.a.createElement("div",{className:"userRating__star -full"})}))))}}]),e}(n.Component),_=(a(50),function(t){function e(){return Object(l.a)(this,e),Object(d.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"cardContainer"},this.props.cards.map(function(t){return s.a.createElement(E,Object.assign({key:t.id},t))}))}}]),e}(n.Component)),y=(a(51),function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(d.a)(this,Object(m.a)(e).call(this))).componentDidMount=function(){var e=Object(p.a)(t);b.database().ref("items").once("value").then(function(t){e.setState({cards:t.val()})})},t.sortArr=function(e){return e.sort(function(e,a){switch(t.state.sort){case"popularity":return a.count-e.count;case"toprated":return a.rating-e.rating;case"lowrated":return e.rating-a.rating;default:return 1}})},t.setSort=function(e){t.setState({sort:e}),localStorage.setItem("landSort",e)},t.state={sort:localStorage.getItem("landSort")||"popularity",cards:[]},t}return Object(v.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:"landing"},s.a.createElement("div",{className:"background"}),s.a.createElement("div",{className:"landing__header"},s.a.createElement("div",{className:"landing__title"},"Rate your favorite snacks..."),s.a.createElement(i.b,{className:"landing__link",to:"/requests"},"Request snacks"),s.a.createElement("div",{className:"landing__sort"},s.a.createElement("div",null,"Sort by:"),s.a.createElement("span",{style:{fontWeight:"popularity"===this.state.sort?600:null},onClick:function(){return t.setSort("popularity")}},"Popularity"),s.a.createElement("span",null,"\xa0\xa0\xa0/\xa0\xa0\xa0"),s.a.createElement("span",{style:{fontWeight:"toprated"===this.state.sort?600:null},onClick:function(){return t.setSort("toprated")}},"Top Rated"),s.a.createElement("span",null,"\xa0\xa0\xa0/\xa0\xa0\xa0"),s.a.createElement("span",{style:{fontWeight:"lowrated"===this.state.sort?600:null},onClick:function(){return t.setSort("lowrated")}},"Lowest Rated"))),s.a.createElement(_,{cards:this.sortArr(this.state.cards)}))}}]),e}(n.Component)),j=(a(56),a(26)),O=(a(21),function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(m.a)(e).call(this,t))).handleVote=function(t){var e=t?"up":"down";if(a.state.vote!==e){var n=t?"upvotes":"downvotes",s=a.state[n]+1;if(localStorage.setItem("vote_"+a.props.id,e),a.setState(Object(j.a)({vote:e},n,s)),b.database().ref("requests/"+a.props.id+"/"+n).set(s),a.state.vote){var r=t?"downvotes":"upvotes",c=a.state[r]-1;a.setState(Object(j.a)({},r,c)),b.database().ref("requests/"+a.props.id+"/"+r).set(c)}}},a.handleRating=function(t){if(a.state.voted){if(t===a.state.myRating)return;var e=(a.state.rating*a.state.count-a.state.myRating+t)/a.state.count;a.setState({rating:e,myRating:t}),localStorage.setItem("snack_"+a.state.id,t),b.database().ref("items/"+a.state.id+"/rating").set(e)}else{var n=a.state.count+1,s=(a.state.rating*(n-1)+t)/n;a.setState({count:n,rating:s,myRating:t,voted:!0}),localStorage.setItem("snack_"+a.state.id,t),b.database().ref("items/"+a.state.id+"/rating").set(s),b.database().ref("items/"+a.state.id+"/count").set(n)}},a.state={upvotes:t.upvotes,downvotes:t.downvotes,vote:localStorage.getItem("vote_"+t.id)||""},a}return Object(v.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this,e=this.props;return s.a.createElement("div",{className:"request",id:e.id},s.a.createElement("div",{className:"request__title"},e.title),s.a.createElement("div",{className:"request__vote -upvote"+("up"===this.state.vote?" -hover":""),onClick:function(){return t.handleVote(!0)}}),s.a.createElement("div",{className:"request__vote -downvote"+("down"===this.state.vote?" -hover":""),onClick:function(){return t.handleVote(!1)}}),s.a.createElement("div",{className:"request__num -upvote"},this.state.upvotes),s.a.createElement("div",{className:"request__num -downvote"},this.state.downvotes))}}]),e}(n.Component)),S=function(t){function e(t){var a;return Object(l.a)(this,e),(a=Object(d.a)(this,Object(m.a)(e).call(this,t))).handleCreate=function(){var t=document.getElementById("newRequest").value;if(t){document.getElementById("newRequest").value="";var e=Object(p.a)(a);b.database().ref("requests").once("value").then(function(t){e.setState({count:t.val().length})}).then(function(){b.database().ref("requests/".concat(a.state.count)).set({id:a.state.count,title:t,upvotes:1,downvotes:0,date:Date.now()}),localStorage.setItem("vote_"+a.state.count,"up"),a.props.updateList()})}},a.state={count:0},a}return Object(v.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"request -new"},s.a.createElement("input",{id:"newRequest",placeholder:"Enter snack name",type:"text",className:"request__title"}),s.a.createElement("hr",{className:"request__underline"}),s.a.createElement("div",{className:"request__right"},s.a.createElement("div",{className:"request__add",onClick:this.handleCreate})))}}]),e}(n.Component),k=function(t){function e(){return Object(l.a)(this,e),Object(d.a)(this,Object(m.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return s.a.createElement("div",{className:"requestContainer"},s.a.createElement(S,{updateList:this.props.updateList}),this.props.requests.map(function(t){return s.a.createElement(O,Object.assign({key:t.id},t))}))}}]),e}(n.Component),w=function(t){function e(){var t;return Object(l.a)(this,e),(t=Object(d.a)(this,Object(m.a)(e).call(this))).componentDidMount=function(){t.updateList()},t.updateList=function(){var e=Object(p.a)(t);b.database().ref("requests").once("value").then(function(t){e.setState({requests:t.val()})})},t.sortArr=function(e){return e.sort(function(e,a){switch(t.state.sort){case"new":return a.date-e.date;case"toprated":return a.upvotes-e.upvotes;default:return 1}})},t.setSort=function(e){t.setState({sort:e}),localStorage.setItem("reqSort",e)},t.state={sort:localStorage.getItem("reqSort")||"top",requests:[]},t}return Object(v.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this;return s.a.createElement("div",{className:"requests"},s.a.createElement("div",{className:"background"}),s.a.createElement("div",{className:"requests__header"},s.a.createElement("div",{className:"requests__title"},"Request your favorite snacks..."),s.a.createElement(i.b,{className:"landing__link",to:"/"},"Rate snacks"),s.a.createElement("div",{className:"requests__sort"},s.a.createElement("div",null,"Sort by:"),s.a.createElement("span",{style:{fontWeight:"new"===this.state.sort?600:null},onClick:function(){return t.setSort("new")}},"New"),s.a.createElement("span",null,"\xa0\xa0\xa0/\xa0\xa0\xa0"),s.a.createElement("span",{style:{fontWeight:"toprated"===this.state.sort?600:null},onClick:function(){return t.setSort("toprated")}},"Top Rated"))),s.a.createElement(k,{requests:this.sortArr(this.state.requests),updateList:this.updateList}))}}]),e}(n.Component);var N=function(){return s.a.createElement(i.a,null,s.a.createElement(o.c,null,s.a.createElement(o.a,{exact:!0,path:"/",component:y}),s.a.createElement(o.a,{exact:!0,path:"/requests",component:w})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[33,1,2]]]);
//# sourceMappingURL=main.6209a216.chunk.js.map